{"ast":null,"code":"import { accountActions } from \"./index\";\nimport { CHAT_ID_POSTFIX, mainApi } from \"../../constants/api\";\nconst getAccountState = (idInstance, apiTokenInstance, chatId) => async dispatch => {\n  dispatch(accountActions.requestAccountStateActionCreator());\n  try {\n    const res = await fetch(`${mainApi(idInstance, apiTokenInstance, 'getStateInstance')}`);\n    if (!res.ok) {\n      dispatch(accountActions.failureAccountStateActionCreator(res.statusText));\n      return;\n    }\n    const parsedData = await res.json();\n    dispatch(accountActions.receiveAccountStateActionCreator({\n      isAuthorized: parsedData.stateInstance === 'authorized',\n      idInstance,\n      apiTokenInstance,\n      chatId: `${chatId}${CHAT_ID_POSTFIX}`\n    }));\n  } catch (err) {\n    dispatch(accountActions.failureAccountStateActionCreator(err));\n  }\n};\nconst logout = () => async (dispatch, getState) => {\n  const rootState = getState();\n  const accountState = rootState.account.accountState;\n  const {\n    idInstance,\n    apiTokenInstance\n  } = accountState;\n  dispatch(accountActions.requestLogoutAccountActionCreator());\n  try {\n    await fetch(`${mainApi(idInstance, apiTokenInstance, 'logout')}`);\n    dispatch(accountActions.successLogoutAccountActionCreator());\n  } catch (err) {\n    dispatch(accountActions.failureLogoutAccountActionCreator(err));\n  }\n};\nexport default {\n  getAccountState,\n  logout\n};","map":{"version":3,"names":["accountActions","CHAT_ID_POSTFIX","mainApi","getAccountState","idInstance","apiTokenInstance","chatId","dispatch","requestAccountStateActionCreator","res","fetch","ok","failureAccountStateActionCreator","statusText","parsedData","json","receiveAccountStateActionCreator","isAuthorized","stateInstance","err","logout","getState","rootState","accountState","account","requestLogoutAccountActionCreator","successLogoutAccountActionCreator","failureLogoutAccountActionCreator"],"sources":["C:/Users/Oscarquell/Desktop/greenAPI/src/redux/Account/thunks.js"],"sourcesContent":["import {accountActions} from \"./index\";\nimport {CHAT_ID_POSTFIX, mainApi} from \"../../constants/api\";\n\nconst getAccountState = (idInstance, apiTokenInstance, chatId) => async (dispatch) => {\n  dispatch(accountActions.requestAccountStateActionCreator())\n  try {\n    const res = await fetch(`${mainApi(idInstance, apiTokenInstance, 'getStateInstance')}`)\n    if (!res.ok) {\n      dispatch(accountActions.failureAccountStateActionCreator(res.statusText))\n      return\n    }\n\n    const parsedData = await res.json()\n    dispatch(accountActions.receiveAccountStateActionCreator({\n      isAuthorized: parsedData.stateInstance === 'authorized',\n      idInstance,\n      apiTokenInstance,\n      chatId: `${chatId}${CHAT_ID_POSTFIX}`\n    }))\n  } catch (err) {\n    dispatch(accountActions.failureAccountStateActionCreator(err))\n  }\n}\n\nconst logout = () => async (dispatch, getState) => {\n  const rootState = getState()\n  const accountState = rootState.account.accountState\n  const {idInstance, apiTokenInstance} = accountState\n\n  dispatch(accountActions.requestLogoutAccountActionCreator())\n  try {\n    await fetch(`${mainApi(idInstance, apiTokenInstance, 'logout')}`)\n    dispatch(accountActions.successLogoutAccountActionCreator() )\n  } catch (err) {\n    dispatch(accountActions.failureLogoutAccountActionCreator(err))\n  }\n}\n\nexport default {\n  getAccountState,\n  logout\n}"],"mappings":"AAAA,SAAQA,cAAc,QAAO,SAAS;AACtC,SAAQC,eAAe,EAAEC,OAAO,QAAO,qBAAqB;AAE5D,MAAMC,eAAe,GAAGA,CAACC,UAAU,EAAEC,gBAAgB,EAAEC,MAAM,KAAK,MAAOC,QAAQ,IAAK;EACpFA,QAAQ,CAACP,cAAc,CAACQ,gCAAgC,CAAC,CAAC,CAAC;EAC3D,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAER,OAAO,CAACE,UAAU,EAAEC,gBAAgB,EAAE,kBAAkB,CAAE,EAAC,CAAC;IACvF,IAAI,CAACI,GAAG,CAACE,EAAE,EAAE;MACXJ,QAAQ,CAACP,cAAc,CAACY,gCAAgC,CAACH,GAAG,CAACI,UAAU,CAAC,CAAC;MACzE;IACF;IAEA,MAAMC,UAAU,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;IACnCR,QAAQ,CAACP,cAAc,CAACgB,gCAAgC,CAAC;MACvDC,YAAY,EAAEH,UAAU,CAACI,aAAa,KAAK,YAAY;MACvDd,UAAU;MACVC,gBAAgB;MAChBC,MAAM,EAAG,GAAEA,MAAO,GAAEL,eAAgB;IACtC,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOkB,GAAG,EAAE;IACZZ,QAAQ,CAACP,cAAc,CAACY,gCAAgC,CAACO,GAAG,CAAC,CAAC;EAChE;AACF,CAAC;AAED,MAAMC,MAAM,GAAGA,CAAA,KAAM,OAAOb,QAAQ,EAAEc,QAAQ,KAAK;EACjD,MAAMC,SAAS,GAAGD,QAAQ,CAAC,CAAC;EAC5B,MAAME,YAAY,GAAGD,SAAS,CAACE,OAAO,CAACD,YAAY;EACnD,MAAM;IAACnB,UAAU;IAAEC;EAAgB,CAAC,GAAGkB,YAAY;EAEnDhB,QAAQ,CAACP,cAAc,CAACyB,iCAAiC,CAAC,CAAC,CAAC;EAC5D,IAAI;IACF,MAAMf,KAAK,CAAE,GAAER,OAAO,CAACE,UAAU,EAAEC,gBAAgB,EAAE,QAAQ,CAAE,EAAC,CAAC;IACjEE,QAAQ,CAACP,cAAc,CAAC0B,iCAAiC,CAAC,CAAE,CAAC;EAC/D,CAAC,CAAC,OAAOP,GAAG,EAAE;IACZZ,QAAQ,CAACP,cAAc,CAAC2B,iCAAiC,CAACR,GAAG,CAAC,CAAC;EACjE;AACF,CAAC;AAED,eAAe;EACbhB,eAAe;EACfiB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}